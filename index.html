<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home</title>
    <link rel="stylesheet" href="icon/css/all.min.css">
    <link rel="stylesheet" href="style/bootstrap.min.css">
    <link rel="stylesheet" href="style/style.css">
    <script src="js/jquery-3.6.0.min.js"></script>

</head>
<body>

    <div class="fixed-menu">
        <ul>
         <!-- <li>
             <a href="">Home</a>
         </li>
         <li>
             <a href="">Apple</a>
         </li>
         <li>
             <a href="">Tesla</a>
         </li>
         <li>
             <a href="">Google</a>
         </li> -->
        </ul>
     </div>
    <div class="container-fluid bar1">
        <div class="container">
            <div class="row">
                <div class="col-xl-12 col-lg-12 menu-box">
                <ul class="ul1">

                    <li id="btnMenu"> 
                        <a href="#"><i class="fa-solid fa-bars"></i></a>
                        
                    </li>
                    <li>
                        <a href=""><i class="fas fa-home"></i></a>
                        
                    </li>

                    <!-- <li>
                        <a href="">Apple</a>
                        <ul class="sub-menu">
                            <li>
                                <a href="">Apple1</a>
                            </li>
                            <li>
                                <a href="">Apple2</a>
                            </li>
                            <li>
                                <a href="">Apple3</a>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <a href="">Tesla</a>
                        <ul class="sub-menu">
                            <li>
                                <a href="">Tesla1</a>
                            </li>
                            <li>
                                <a href="">Tesla2</a>
                            </li>
                            <li>
                                <a href="">Tesla3</a>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <a href="">Google</a>
                        <ul class="sub-menu">
                            <li>
                                <a href="">Google1</a>
                            </li>
                            <li>
                                <a href="">Google2</a>
                            </li>
                            <li>
                                <a href="">Google3</a>
                            </li>
                        </ul>
                    </li> -->
                    
                </ul>    
                </div>
            </div>
        </div>
    </div>
    <!-- Todo with left-bar -->
     <div class="container data-container">
        <div class="row">
            <div class="col-xl-3 left-menu">
                <div class="box">
                    <ul>     

                    </ul>
                </div>
            </div>
            <div class="col-xl-9 slide-container">
                <div class="slide-box">

                   <!-- <div class="slide">
                    <img src="img/slide1.jpg" alt="image not found">
                    <span>1</span>
                   </div>
                   <div class="slide">
                    <img src="img/slide2.jpg" alt="image not found">
                    <span>2</span>
                   </div>
                   <div class="slide">
                    <img src="img/slide3.jpg" alt="image not found">
                    <span>3</span>
                   </div>
                   <div class="slide">
                    <img src="img/slide4.jpg" alt="image not found">
                    <span>4</span>
                   </div>
                   <div class="slide">
                    <img src="img/slide5.jpg" alt="image not found">
                    <span>5</span>
                   </div> -->


                   <div class="btnSlide btnBack">
                        <i class="fa-solid fa-angle-left"></i>
                    </div>
                    <div class="btnSlide btnNext">
                        <i class="fa-solid fa-angle-right"></i>
                    </div>
                    <!-- Display pagination [1,2,3,4,5 and more...] -->
                    <div class="pagination">
                        <!-- <ul>
                            <li>1</li>
                            <li>2</li>
                            <li>3</li>
                            <li>4</li>
                            <li>5</li>
                        </ul> -->
                    </div>

                </div>
                
            </div>
        </div>
     </div>

</body>
<script>
    
    const item =[
         {
            "name":"Home",
            "img":"img/slide1.jpg",
            "sub-menu":[
                {"name":"Apple"},
                {"name":"Tesla"},
                {"name":"Google"},
            ],

         },
         {
            "name":"Apple",
            "img":"img/slide2.jpg",
            "sub-menu":[
                {"name":"Apple1"},
                {"name":"Apple2"},
                {"name":"Apple3"},
            ],
         },
         {
            "name":"Tesla",
            "img":"img/slide3.jpg",
            "sub-menu":[
                {"name":"Tesla1"},
                {"name":"Tesla2"},
                {"name":"Tesla3"},
            ],
         },
         {
            "name":"Google",
            "img":"img/slide4.jpg",
            "sub-menu":[
                {"name":"Google1"},
                {"name":"Google2"},
                {"name":"Google3"},
            ],
         },
         {
            "name":"Microsoft",
            "img":"img/slide5.jpg",
            "sub-menu":[
                {"name":"Microsoft1"},
                {"name":"Microsoft2"},
                {"name":"Microsoft3"},
            ],
         },
    ];

    // Working with slide menu-box

    $(document).ready(function(){
        //Auto slide in JS
       var myAutoSlide =  setInterval(function (){
             $('.btnNext').click();
            },
            3000 // equal to 4  នាទី
        );
        $(".slide-box").mouseover(function(){
           clearInterval(myAutoSlide);
        });
        //Check codition for mouseout
        $(".slide-box").mouseout(function(){
            myAutoSlide = setInterval(function(){
                $('.btnNext').click();
            },
            3000
            );
        });
        $('.pagination').on('click','ul li',function(){
            slide.eq(slideIndex).hide();
            $('.pagination').find('li').eq(slideIndex).removeClass('active'); //=0
            slideIndex = $(this).index();
            slide.eq(slideIndex).show();
            $('.pagination').find('li').eq(slideIndex).addClass('active');

        });

         // Next button functionality
         getSlide();
        var slideIndex = 0;
        var slide = $(".slide");
        var numSlide = slide.length; // 5
        slide.hide();
        slide.eq(slideIndex).show();

        $('.btnNext').click(function(){
            slide.eq(slideIndex).hide();
            $('.pagination').find('li').eq(slideIndex).removeClass('active'); //=0
            slideIndex++;
            if(slideIndex >= numSlide){
                slideIndex = 0;
            }
            slide.eq(slideIndex).show();
            $('.pagination').find('li').eq(slideIndex).addClass('active');
        });
         // Previous button functionality
        $('.btnBack').click(function(){
            slide.eq(slideIndex).hide();
            $('.pagination').find('li').eq(slideIndex).removeClass('active');
            slideIndex--;
            if(slideIndex <0){
                slideIndex = numSlide -1;
            }
            slide.eq(slideIndex).show();
            $('.pagination').find('li').eq(slideIndex).addClass('active');
        });

        // Create function get slide from Item[]
        function getSlide(){
            var txt = '';
            var txtList = "";
            var x = 1;
            for(i in item){
                txt +=`
                    <div class="slide">
                    <img src="${item[i]['img']}" alt="image not found">
                    <span>${x}/${item.length}</span>
                   </div>
                `;
                txtList+=`
                    <li>${x}</li>
                `;
                x++;
            }
            $(".slide-box").append(txt);
            $('.pagination').append(`<ul>${txtList}</ul>`);
            $('.pagination').find('li').eq(0).addClass('active');

        }

        var popup = '<div class="popup"></div>';
        getItemMenu();
        getLeftMenu();
        getleftMeunBoxIn();

        // Manage to left-menu box in container 

        function getleftMeunBoxIn(){
            var txt = "";
            for(i in item){
               txt +=`
                <li>
                    <a href="#" class="m1">${item[i]['name']}<i class="fas fa-plus"></i></a>
                </li> 
               `;
            }
            $('.left-menu').find('.box ul').append(txt);
        }

        $('.left-menu').on('click','.m1',function(){
            var eThis = $(this);
            var parent = eThis.parent();
            var index = parent.index();
            var subMenu  =  item[index]['sub-menu'];
            var numberSubMenu = parent.find('.left-sub-menu').length;
            if(numberSubMenu == 0){
                var txt = "";
                for(i in subMenu){
                txt +=`
                    <li>
                        <a href="">${subMenu[i]['name']}</a>
                    </li>
                `;
            }
                eThis.find('i').removeClass('fa-plus');
                eThis.find('i').addClass('fa-minus');
                parent.append(
                        `
                        <div class="left-sub-menu">
                            <ul>
                                ${txt}                      
                            </ul>
                        </div>
                    `
                );
            }else{
                // parent.find('.left-sub-menu').remove();
                if(eThis.find('.fa-minus').length >0 ){
                    parent.find('.left-sub-menu').slideUp();
                    eThis.find('i').addClass('fa-plus');
                    eThis.find('i').removeClass('fa-minus');
                }else{
                    parent.find('.left-sub-menu').slideDown();
                    eThis.find('i').removeClass('fa-plus');
                    eThis.find('i').addClass('fa-minus');
                }
                   
            }
         
        });

        function getItemMenu(){
        var menu = "";
        for(i in item){
            var subMenu = item[i]['sub-menu'];
            var txt = "";
            for(x in subMenu){
                txt +=`
                <li>
                    <a href="">
                        ${subMenu[x]['name']}
                    </a>
                </li>
                `;
            }
            menu +=`
                <li>
                    <a href="">${item[i]['name']}</a>
                    <ul class='sub-menu'>
                        ${txt}
                    </ul>
                </li>
            `;
        }
        $(".menu-box").find(".ul1").append(menu); 
        }

        function getLeftMenu(){
            var txt = "";
            for(i in item){
                txt  +=`
                    <li>
                        <a href="">${item[i]['name']}</a>
                    </li>
                `;
            }
            $(".fixed-menu").find('ul').html(txt);
        }

         //show fixed menu-bars.
         $('#btnMenu').click(function(){
            $(".fixed-menu").css({"left":"0"});
            $("body").append(popup);
         });
         //close fixed menu-bars in body.
         $('body').on('click','.popup',function(){
             $(this).remove();
             $(".fixed-menu").css({"left":"-253px"});
         });
        
    });
   
</script>
</html>